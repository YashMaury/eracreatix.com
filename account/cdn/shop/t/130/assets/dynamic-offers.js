const OfferTypes={READYTOAPPLY:"readyToApply",DISCOUNTOFFER:"discountOffer"},defaultOfferText="| Check best offers for you |",couponsMapping={VAAREE5:["VAAREE5","VAAREE530"],VAAREE10:["VAAREE1030"],CUSHIONLOVE:["CUSHIONLOVE"],FLAT600:["VAAREE630"],FLAT2000:["VAAREE2030"]},cartOffers={VAAREE5:e=>({readyToApply:[defaultOfferText,`Save <br/>5% | ${boldText("Get 5% OFF")} ${generateSubText("On orders above \u20B9799")}`],discountOffer:[`Save ${boldText("\u20B9"+returnAmtTwoDec(.05*e.productValue))} | Get it for ${"\u20B9"+boldText(returnAmtTwoDec(.95*e.productValue))} | With 1 offer`,`Save <br/>${"\u20B9"+returnAmtTwoDec(.05*e.productValue)} | ${boldText("Get 5% OFF")} ${generateSubText("On orders above \u20B9799")}`]}),CUSHIONLOVE:()=>({readyToApply:`Get <br/>1 Free | ${boldText("Buy 4 Get 1 FREE Cushion cover")} ${generateSubText("Applicable on all cushion covers")}`}),VAAREE530:e=>({readyToApply:[`Save ${boldText("\u20B9"+returnAmtTwoDec(.05*e.productValue))} | Get it for ${boldText("\u20B9"+returnAmtTwoDec(.95*e.productValue))} | With 2 offers`,`Save <br/>${"\u20B9"+returnAmtTwoDec(.05*e.productValue)} | ${boldText("Get 5% OFF")} ${generateSubText("On orders above \u20B9799")}`,`Save <br/>\u20B930 | Additional offer with Prepaid ${generateSubText("Pay with UPI or card payment")}`]}),VAAREE1030:e=>({readyToApply:`Save <br/>10% | ${boldText("Get 10% OFF")} ${generateSubText("On orders above \u20B91999")}`,discountOffer:[`Save ${boldText("\u20B9"+returnAmtTwoDec(.1*e.productValue))} | Get it for ${boldText("\u20B9"+returnAmtTwoDec(.9*e.productValue))} | With 2 offers`,`Save <br/>${"\u20B9"+returnAmtTwoDec(.1*e.productValue)} | ${boldText("Get 10% OFF")} ${generateSubText("On orders above \u20B91999")}`,`Save <br/>\u20B930 | Additional offer with Prepaid ${generateSubText("Pay with UPI or card payment")}`]}),VAAREE630:e=>({readyToApply:["| Get Flat \u20B9630 OFF | With 2 offers",`Save <br/>\u20B9600 | ${boldText("Flat 600 OFF")} ${generateSubText("On orders above \u20B93999")}`,`Save <br/>\u20B930 | Additional offer with Prepaid ${generateSubText("Pay with UPI or card payment")}`]}),VAAREE2030:e=>({readyToApply:["| Get Flat \u20B92030 OFF | With 2 offers",`Save <br/>\u20B92000 | ${boldText("Flat 2000 OFF")} ${generateSubText("On orders above \u20B99999")}`,`Save <br/>\u20B930 | Additional offer with Prepaid ${generateSubText("Pay with UPI or card payment")}`]})},cushionProductType=["cushion cover","cushion covers","cushion cover sets"];function returnCoupon(couponKey){return Object.keys(couponsMapping).find(coupon2=>couponsMapping[coupon2].includes(couponKey))||"DEFAULT"}function returnAmtTwoDec(e){return(e=e.toFixed(2)).endsWith(".00")&&(e=parseInt(e)),e}function convertToRs(e){var r=parseFloat(e/100).toFixed(2);return r.endsWith(".00")&&(r=parseInt(r)),r}function convertPriceStringToFloat(e){if(typeof e=="string"){var r=e.replace(/,/g,""),t=r.match(/â‚¹(\d+(\.\d{1,2})?)/);return parseFloat(t?t[1]:r)}}function getProductValue(){var e,r=document.querySelector("#pdp-price-reviews ins");return r||(r=document.querySelector("#pdp-price-reviews .t4s-product-price")),e=convertPriceStringToFloat(r.textContent)}function generateParams(e,r){var t=getProductValue(),o=!1;return cushionProductType.includes(r?.toLowerCase())&&(o=!0),{isCushion:o,productValue:t,cartValue:e}}function handleFormChange(e){var r=document.querySelector(".t4s-swatch__item.is--selected .price").textContent,selectedSwatchItem=document.querySelector(".t4s-swatch__item.is--selected"),dynamicOfferInfoElement=document.getElementById("dynamic-offer-info");selectedSwatchItem&&selectedSwatchItem.classList.contains("is--soldout")?dynamicOfferInfoElement.classList.add("disable-offers"):dynamicOfferInfoElement.classList.remove("disable-offers"),showOffers(e={...e,productValue:convertPriceStringToFloat(r)})}function setComparePrice(e){return e.cartValue==0?e.productValue:e.cartValue}function setCushionOffer(e){return e?OfferTypes.READYTOAPPLY:null}function boldText(str){var textHtml=`<b>${str}</b>`;return textHtml}function generateSubText(str){var textHtml=`<div class="offer-sub-text">${str}</div>`;return textHtml}function createOfferText(e){var r=e.productValue,t={DEFAULT:null,VAAREE5:null,VAAREE10:null,VAAREE1030:null,VAAREE530:null,VAAREE2030:null,VAAREE630:null,CUSHIONLOVE:setCushionOffer(e.isCushion)};switch(!0){case(r>0&&r<799):t.VAAREE5=OfferTypes.READYTOAPPLY,e.isCushion||(t.VAAREE1030=OfferTypes.READYTOAPPLY);break;case(r>=799&&r<999):t.VAAREE5=OfferTypes.DISCOUNTOFFER;break;case(r>=999&&r<1999):t.VAAREE530=OfferTypes.READYTOAPPLY;break;case(r>=1999&&r<3999):t.VAAREE1030=OfferTypes.DISCOUNTOFFER;break;case(r>=3999&&r<9999):t.VAAREE630=OfferTypes.READYTOAPPLY;break;case r>=9999:t.VAAREE2030=OfferTypes.READYTOAPPLY}return t}function getOffersTexts(e){var r=[],t=createOfferText(e);return Object.keys(t).forEach(o=>{if(t[o]){var couponCode=returnCoupon(o),n=cartOffers[o](e)[t[o]],couponOffers={[couponCode]:n};r.push(couponOffers)}}),r}function getFirstText(e){var textHead=e[0];return textHead=textHead[Object.keys(textHead)[0]],Array.isArray(textHead)&&(textHead=textHead[0]),textHead}function extractOfferDetails(offerText,separator="|"){var offerParts=offerText.split(separator),spanElement="<span class='header-title'>";if(offerParts.length>1)if(convertPriceStringToFloat(offerParts[0])){spanElement+=offerParts[1].trim()+"</span>";var amountSaved=convertPriceStringToFloat(offerParts[0]),discountFlag="<span class='flag-container'><div class='saved-amount'>Extra \u20B9"+amountSaved+' OFF</div><span class="flag_rect"></span></span>';spanElement+=discountFlag}else offerText==defaultOfferText?spanElement+=offerText.replace(defaultOfferText,"")+"</span>":spanElement+=offerParts[1].trim()+"</span>";else spanElement+=offerText.replace(defaultOfferText,"")+"</span>";return spanElement}function copyTextToClipboard(str){if(navigator&&navigator.clipboard&&navigator.clipboard.writeText){let toastMarkup=toast();$("body").append(toastMarkup),document.getElementsByClassName("copy-clipboard-icon")[0].style.pointerEvents="none";const removeToast=setInterval(()=>{$(".toast-text-wrapper")[0].remove(),document.getElementsByClassName("copy-clipboard-icon")[0].style.pointerEvents="all",clearInterval(removeToast)},3e3);return navigator.clipboard.writeText(str)}return Promise.reject("The Clipboard API is not available.")}function toast(){return`<div class="toast-text-wrapper">
        ${checkCircleSvg}
        <span>Coupon code has been copied</span>
    </div>`}function createOfferCard(text,couponCode,cardSvg){var splittedText=text.split("|").map(str=>str.trim()),offerCardElement=document.createElement("div");offerCardElement.classList.add("offer-card");var singleOfferElement=`
  <div class="offer-text-container">
    <div class="offer-text-wrapper">
      <div class="offer-icon-container">${cardSvg}</div>
      <div class="offer_text">
        ${splittedText[1]}
      </div>
    </div>
    <div class="saved_amount_text">
      ${splittedText[0].split("<br/>")[0].trim()}
        <div class="offer-amount">${splittedText[0].split("<br/>")[1].trim()}</div>
    </div>
  </div>
  ${couponCode?`<div class="copy-coupon-clipboard-wrapper">
      <div class="coupon-code-title-wrapper">
        <span class="credit-card-font">
          ${creditCardSvg}
        </span>
        <span class="coupon-code-title">Code:<b>${couponCode}</b></span>
      </div>
      <div class="copy-clipboard-icon" onclick=${`copyTextToClipboard('${couponCode}')`}>
        ${clipboardCopySvg}
      </div>
    </div>`:""}
  `;return offerCardElement.innerHTML=singleOfferElement,offerCardElement}function createPopupText(textHead){var splittedText=textHead.split("|").map(str=>str.trim()),popupText=splittedText[1],popupOffertext=splittedText[2],popupDiv=`
    ${animationRectangle}
    <span class="popup_discount_text">
      <span class="offer-icon">
        <div class="animated-icon-container">
          <div class="rotating-svg-background"></div>
          ${percentSvg}
        </div>
      </span>
      <span class="popup_text">
        ${popupText}
      </span>
    </span>
    <span class="offer_count_text">
        ${popupOffertext}
        ${downChevronSvg}
    </span>
  `;return popupDiv}function createOptionText(){var optionTextElement=document.createElement("div");return optionTextElement.classList.add("option-text"),optionTextElement.textContent="OR, you can also:",optionTextElement}function setPopupLink(e){var offerPopupLink=document.querySelector("#dynamic-offer-info");if(offerPopupLink){var textHead=getFirstText(e),textElem=createPopupText(textHead);offerPopupLink.innerHTML=textElem}}function setPopupHead(e){var offerDetailsElement=document.querySelector(".offer-details"),offersToApplyElement=offerDetailsElement?.querySelector(".offers-to-apply");offerDetailsElement&&(offersToApplyElement.innerHTML="");var textHead=getFirstText(e),offerDetails=extractOfferDetails(textHead);offerDetailsElement&&(offersToApplyElement.innerHTML=offerDetails||"")}function setPopupOffers(e){var offerDetailsElement=document.querySelector(".offers-list"),additionalOffers=[];if(offerDetailsElement){offerDetailsElement.innerHTML="",e.forEach((offerObj,index)=>{var offer=offerObj[Object.keys(offerObj)[0]],couponCode=Object.keys(offerObj)[0];if(index!=0&&offerDetailsElement.appendChild(createOptionText()),Array.isArray(offer))offer.forEach((subOffer,subIndex)=>{subIndex==1&&offerDetailsElement.appendChild(createOfferCard(subOffer,couponCode,couponsSvg)),subIndex>1&&additionalOffers.push(subOffer)});else{offerDetailsElement.appendChild(createOfferCard(offer,couponCode,couponsSvg));var plusIcon=offerDetailsElement.lastChild.querySelector(".plus-icon");plusIcon&&(plusIcon.style.display="none")}});var uniqueAdditionalOffers=[...new Set(additionalOffers)];uniqueAdditionalOffers.forEach(subOffer=>{var offerElem=createOfferCard(subOffer,null,additionalOfferSvg);offerDetailsElement.appendChild(createOfferCardPlusElem()),offerDetailsElement.appendChild(offerElem)})}}function createOfferCardPlusElem(){var offerCardPlusElem=document.createElement("div");offerCardPlusElem.classList.add("plus_icon_divider");var plusIcon=`
  <div class="plus-icon">${plusSvg}</div>
  `;return offerCardPlusElem.innerHTML=plusIcon,offerCardPlusElem}function setPopupData(e){setPopupHead(e),setPopupOffers(e)}function createOffersElement(e){var bestOfferContainer=document.getElementById("best-offer-container");e.length!==0&&(setPopupLink(e),bestOfferContainer?setPopupData(e):document.addEventListener("DOMContentLoaded",()=>{setPopupData(e)}))}function showOffers(e){createOffersElement(getOffersTexts(e))}
//# sourceMappingURL=/cdn/shop/t/130/assets/dynamic-offers.js.map
