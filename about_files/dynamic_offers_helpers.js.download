class CopyCoupon extends HTMLElement{constructor(){super(),this.addEventListener("click",this.copyTextToClipboard.bind(this))}toast(){return`<div class="toast-text-wrapper">
          ${checkCircleSvg}
          <span>Coupon code has been copied</span>
      </div>`}copyTextToClipboard(){let str=this.getAttribute("data-to-copy");if(navigator&&navigator.clipboard&&navigator.clipboard.writeText){let toastMarkup=this.toast(),div=document.createElement("div");div.classList.add("dy-toast-wrapper"),div.innerHTML=toastMarkup,document.body.appendChild(div),document.getElementsByClassName("copy-clipboard-icon")[0].style.pointerEvents="none";const removeToast=setInterval(()=>{document.querySelector(".dy-toast-wrapper").remove(),document.getElementsByClassName("copy-clipboard-icon")[0].style.pointerEvents="all",clearInterval(removeToast)},3e3);return navigator.clipboard.writeText(str)}return Promise.reject("The Clipboard API is not available.")}}customElements.define("copy-coupon",CopyCoupon);class DyanmicOffers extends HTMLElement{constructor(){super(),this.OfferTypes={READYTOAPPLY:"readyToApply",DISCOUNTOFFER:"discountOffer"},this.defaultOfferText="| Check best offers for you |",this.couponsMapping={VAAREE5:["VAAREE5","VAAREE530"],VAAREE10:["VAAREE1030"],CUSHIONLOVE:["CUSHIONLOVE"],FLAT600:["VAAREE630"],FLAT2000:["VAAREE2030"]},this.cartOffers={VAAREE5:e=>({readyToApply:[this.defaultOfferText,`Save <br/>5% | ${this.boldText("Get 5% OFF")} ${this.generateSubText("On orders above \u20B9799")}`],discountOffer:[`Save ${this.boldText("\u20B9"+this.returnAmtTwoDec(.05*e.productValue))} | Get it for ${"\u20B9"+this.boldText(this.returnAmtTwoDec(.95*e.productValue))} | With 1 offer`,`Save <br/>${"\u20B9"+this.returnAmtTwoDec(.05*e.productValue)} | ${this.boldText("Get 5% OFF")} ${this.generateSubText("On orders above \u20B9799")}`]}),CUSHIONLOVE:()=>({readyToApply:`Get <br/>1 Free | ${this.boldText("Buy 4 Get 1 FREE Cushion cover")} ${this.generateSubText("Applicable on all cushion covers")}`}),VAAREE530:e=>({readyToApply:[`Save ${this.boldText("\u20B9"+this.returnAmtTwoDec(.05*e.productValue))} | Get it for ${this.boldText("\u20B9"+this.returnAmtTwoDec(.95*e.productValue))} | With 2 offers`,`Save <br/>${"\u20B9"+this.returnAmtTwoDec(.05*e.productValue)} | ${this.boldText("Get 5% OFF")} ${this.generateSubText("On orders above \u20B9799")}`,`Save <br/>\u20B930 | Additional offer with Prepaid ${this.generateSubText("Pay with UPI or card payment")}`]}),VAAREE1030:e=>({readyToApply:`Save <br/>10% | ${this.boldText("Get 10% OFF")} ${this.generateSubText("On orders above \u20B91999")}`,discountOffer:[`Save ${this.boldText("\u20B9"+this.returnAmtTwoDec(.1*e.productValue))} | Get it for ${this.boldText("\u20B9"+this.returnAmtTwoDec(.9*e.productValue))} | With 2 offers`,`Save <br/>${"\u20B9"+this.returnAmtTwoDec(.1*e.productValue)} | ${this.boldText("Get 10% OFF")} ${this.generateSubText("On orders above \u20B91999")}`,`Save <br/>\u20B930 | Additional offer with Prepaid ${this.generateSubText("Pay with UPI or card payment")}`]}),VAAREE630:e=>({readyToApply:["| Get Flat \u20B9630 OFF | With 2 offers",`Save <br/>\u20B9600 | ${this.boldText("Flat 600 OFF")} ${this.generateSubText("On orders above \u20B93999")}`,`Save <br/>\u20B930 | Additional offer with Prepaid ${this.generateSubText("Pay with UPI or card payment")}`]}),VAAREE2030:e=>({readyToApply:["| Get Flat \u20B92030 OFF | With 2 offers",`Save <br/>\u20B92000 | ${this.boldText("Flat 2000 OFF")} ${this.generateSubText("On orders above \u20B99999")}`,`Save <br/>\u20B930 | Additional offer with Prepaid ${this.generateSubText("Pay with UPI or card payment")}`]})},this.cushionProductType=["cushion cover","cushion covers","cushion cover sets"],this.cartValueIni=document.querySelector("dynamic-offers ")?.getAttribute("data-cart-total")||null,this.product_type=document.querySelector("dynamic-offers ")?.getAttribute("data-product-type")||null;let offerParams=this.generateParams(this.cartValueIni,this.product_type);this.showOffers(offerParams)}boldText(str){var textHtml=`<b>${str}</b>`;return textHtml}generateSubText(str){var textHtml=`<div class="offer-sub-text">${str}</div>`;return textHtml}returnAmtTwoDec(e){return(e=e.toFixed(2)).endsWith(".00")&&(e=parseInt(e)),e}returnCoupon(couponKey){return Object.keys(this.couponsMapping).find(coupon2=>this.couponsMapping[coupon2].includes(couponKey))||"DEFAULT"}convertToRs(e){var r=parseFloat(e/100).toFixed(2);return r.endsWith(".00")&&(r=parseInt(r)),r}convertPriceStringToFloat(e){if(typeof e=="string"){var r=e.replace(/,/g,""),t=r.match(/â‚¹(\d+(\.\d{1,2})?)/);return parseFloat(t?t[1]:r)}}getProductValue(){var e,r=document.querySelector(".item-price-sale");return e=this.convertPriceStringToFloat(r.textContent)}generateParams(e,r){var t=this.getProductValue(),o=!1;return r&&this.cushionProductType.includes(r.toLowerCase())&&(o=!0),{isCushion:o,productValue:t,cartValue:this.convertPriceStringToFloat(e)}}handleFormChange(e){let productValue=e.target.getAttribute("data-old-price"),selectedSwatchItem=e.target,dynamicOfferInfoElement=document.getElementById("dynamic-offer-info");if(!dynamicOfferInfoElement)return 1;selectedSwatchItem&&selectedSwatchItem.classList.contains("disabled")?(document.querySelector("#ProductPopup-dynamic-offers-pdp").disabled=!0,dynamicOfferInfoElement.classList.add("disable-offers")):(document.querySelector("#ProductPopup-dynamic-offers-pdp").disabled=!1,dynamicOfferInfoElement.classList.remove("disable-offers"));let updatedParams=this.generateParams(this.cartValueIni,this.product_type);this.showOffers(updatedParams={...updatedParams,productValue:this.convertPriceStringToFloat(productValue)})}setComparePrice(e){return e.cartValue==0?e.productValue:e.cartValue}setCushionOffer(e){return e?this.OfferTypes.READYTOAPPLY:null}createOfferText(e){var r=e.productValue,t={DEFAULT:null,VAAREE5:null,VAAREE10:null,VAAREE1030:null,VAAREE530:null,VAAREE2030:null,VAAREE630:null,CUSHIONLOVE:this.setCushionOffer(e.isCushion)};switch(!0){case(r>0&&r<799):t.VAAREE5=this.OfferTypes.READYTOAPPLY,e.isCushion||(t.VAAREE1030=this.OfferTypes.READYTOAPPLY);break;case(r>=799&&r<999):t.VAAREE5=this.OfferTypes.DISCOUNTOFFER;break;case(r>=999&&r<1999):t.VAAREE530=this.OfferTypes.READYTOAPPLY;break;case(r>=1999&&r<3999):t.VAAREE1030=this.OfferTypes.DISCOUNTOFFER;break;case(r>=3999&&r<9999):t.VAAREE630=this.OfferTypes.READYTOAPPLY;break;case r>=9999:t.VAAREE2030=this.OfferTypes.READYTOAPPLY}return t}getOffersTexts(e){let r=[],t=this.createOfferText(e);return Object.keys(t).forEach(o=>{if(t[o]){let couponCode=this.returnCoupon(o),n=this.cartOffers[o](e)[t[o]],couponOffers={[couponCode]:n};r.push(couponOffers)}}),r}getFirstText(e){var textHead=e[0];return textHead=textHead[Object.keys(textHead)[0]],Array.isArray(textHead)&&(textHead=textHead[0]),textHead}extractOfferDetails(offerText,separator="|"){var offerParts=offerText.split(separator),spanElement="<span class='header-title'>";if(offerParts.length>1)if(this.convertPriceStringToFloat(offerParts[0])){spanElement+=offerParts[1].trim()+"</span>";var amountSaved=this.convertPriceStringToFloat(offerParts[0]),discountFlag="<span class='flag-container'><div class='saved-amount'>Extra \u20B9"+amountSaved+' OFF</div><span class="flag_rect"></span></span>';spanElement+=discountFlag}else offerText==this.defaultOfferText?spanElement+=offerText.replace(this.defaultOfferText,"")+"</span>":spanElement+=offerParts[1].trim()+"</span>";else spanElement+=offerText.replace(this.defaultOfferText,"")+"</span>";return spanElement}createOfferCard(text,couponCode,cardSvg){let splittedText=text.split("|").map(str=>str.trim()),offerCardElement=document.createElement("div");offerCardElement.classList.add("offer-card");let singleOfferElement=`
    <div class="offer-text-container">
      <div class="offer-text-wrapper">
        <div class="offer-icon-container">${cardSvg}</div>
        <div class="offer_text">
          ${splittedText[1]}
        </div>
      </div>
      <div class="saved_amount_text">
        ${splittedText[0].split("<br/>")[0].trim()}
          <div class="offer-amount">${splittedText[0].split("<br/>")[1].trim()}</div>
      </div>
    </div>
    ${couponCode?`<div class="copy-coupon-clipboard-wrapper">
        <div class="coupon-code-title-wrapper">
          <span class="credit-card-font">
            ${creditCardSvg}
          </span>
          <span class="coupon-code-title">Code:<b>${couponCode}</b></span>
        </div>
        <copy-coupon class="copy-clipboard-icon" data-to-copy=${couponCode}>
              ${clipboardCopySvg}
        </copy-coupon>
      </div>`:""}
    `;return offerCardElement.innerHTML=singleOfferElement,offerCardElement}createPopupText(textHead){let splittedText=textHead.split("|").map(str=>str.trim()),popupText=splittedText[1],popupOffertext=splittedText[2];return`
      ${animationRectangle}
      <span class="popup_discount_text">
        <span class="offer-icon">
          <div class="animated-icon-container">
            <div class="rotating-svg-background"></div>
            ${percentSvg}
          </div>
        </span>
        <span class="popup_text">
          ${popupText}
        </span>
      </span>
      <span class="offer_count_text">
          ${popupOffertext}
          ${downChevronSvg}
      </span>
    `}createOptionText(){var optionTextElement=document.createElement("div");return optionTextElement.classList.add("option-text"),optionTextElement.textContent="OR, you can also:",optionTextElement}setPopupLink(e){let offerPopupLink=document.querySelector("#dynamic-offer-info");if(offerPopupLink){let textHead=this.getFirstText(e),textElem=this.createPopupText(textHead);offerPopupLink.innerHTML=textElem}}setPopupHead(e){let offerDetailsElement=document.querySelector(".offer-details"),offersToApplyElement=offerDetailsElement?.querySelector(".offers-to-apply");offerDetailsElement&&(offersToApplyElement.innerHTML="");let textHead=this.getFirstText(e),offerDetails=this.extractOfferDetails(textHead);offerDetailsElement&&(offersToApplyElement.innerHTML=offerDetails||"")}setPopupOffers(e){var offerDetailsElement=document.querySelector(".offers-list"),additionalOffers=[];if(offerDetailsElement){offerDetailsElement.innerHTML="",e.forEach((offerObj,index)=>{var offer=offerObj[Object.keys(offerObj)[0]],couponCode=Object.keys(offerObj)[0];if(index!=0&&offerDetailsElement.appendChild(this.createOptionText()),Array.isArray(offer))offer.forEach((subOffer,subIndex)=>{subIndex==1&&offerDetailsElement.appendChild(this.createOfferCard(subOffer,couponCode,couponsSvg)),subIndex>1&&additionalOffers.push(subOffer)});else{offerDetailsElement.appendChild(this.createOfferCard(offer,couponCode,couponsSvg));var plusIcon=offerDetailsElement.lastChild.querySelector(".plus-icon");plusIcon&&(plusIcon.style.display="none")}});var uniqueAdditionalOffers=[...new Set(additionalOffers)];uniqueAdditionalOffers.forEach(subOffer=>{var offerElem=this.createOfferCard(subOffer,null,additionalOfferSvg);offerDetailsElement.appendChild(this.createOfferCardPlusElem()),offerDetailsElement.appendChild(offerElem)})}}createOfferCardPlusElem(){var offerCardPlusElem=document.createElement("div");offerCardPlusElem.classList.add("plus_icon_divider");var plusIcon=`
    <div class="plus-icon">${plusSvg}</div>
    `;return offerCardPlusElem.innerHTML=plusIcon,offerCardPlusElem}setPopupData(e){this.setPopupHead(e),this.setPopupOffers(e)}createOffersElement(e){var bestOfferContainer=document.getElementById("best-offer-container");e.length!==0&&(this.setPopupLink(e),bestOfferContainer?this.setPopupData(e):document.addEventListener("DOMContentLoaded",()=>{this.setPopupData(e)}))}showOffers(e){this.createOffersElement(this.getOffersTexts(e))}}customElements.define("dynamic-offers",DyanmicOffers);
//# sourceMappingURL=/cdn/shop/t/674/assets/dynamic_offers_helpers.js.map?v=174895290872426837621715759658
